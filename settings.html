<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessibility Translator - Settings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="css/main-styles.css" rel="stylesheet">
    <link href="css/settings.css" rel="stylesheet">
</head>
<body data-theme="dark">
    <!-- Floating Shapes Background -->
    <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
    </div>

    <!-- Navigation -->
    <nav id="navbar" class="navbar navbar-expand-lg navbar-mainbg fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand navbar-logo" href="home.html">Accessibility Translator</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
                <i class="fas fa-bars text-white"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="home.html"><i class="fas fa-home"></i>Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html"><i class="fas fa-envelope"></i>Contact</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-cogs"></i>Features
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="text-to-speech.html">Text-to-Speech</a></li>
                            <li><a class="dropdown-item" href="object-scanning.html">Object Scanning</a></li>
                            <li><a class="dropdown-item" href="color-filter.html">Color Filter</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-palette"></i>Color Filter
                        </a>
                        <ul class="dropdown-menu" id="colorFilterMenu"></ul>
                    </li>
                    <li class="nav-item active"><a class="nav-link" href="settings.html"><i class="fas fa-cog"></i>Settings</a></li>
                    <li class="nav-item d-flex align-items-center">
                        <div id="voiceNavigationContainer"></div>
                        <button id="logoutBtn" class="btn btn-link text-white ms-2">
                            <i class="fas fa-user-circle fa-2x"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Arrow Navigation -->
    <div class="arrow-navigation">
        <button id="scrollUpBtn" class="arrow-btn"><i class="fas fa-chevron-up"></i></button>
        <button id="scrollDownBtn" class="arrow-btn"><i class="fas fa-chevron-down"></i></button>
    </div>

    <!-- Settings Content -->
    <main class="settings-main">
        <div class="settings-container">
            <header class="settings-header">
                <div class="logo-container">
                    <div class="logo-gradient">
                        <i class="fas fa-cog fa-spin"></i>
                    </div>
                    <h1>Settings & Preferences</h1>
                </div>
                <p class="settings-subtitle">Customize your accessibility experience</p>
            </header>

            <div class="settings-content">
                <!-- Profile Settings -->
                <section class="settings-section">
                    <h2><i class="fas fa-user"></i> Profile Settings</h2>
                    
                    <div class="profile-preview">
                        <div class="profile-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="profile-info">
                            <h4 id="profileName">Guest User</h4>
                            <p id="profileEmail">Not logged in</p>
                        </div>
                    </div>

                    <div class="setting-item">
                        <label for="displayName">Display Name</label>
                        <input type="text" id="displayName" class="form-control-custom" placeholder="Enter your display name">
                    </div>

                    <div class="setting-item">
                        <label for="userEmail">Email Address</label>
                        <input type="email" id="userEmail" class="form-control-custom" placeholder="your@email.com">
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="emailNotifications">
                            <span class="checkmark"></span>
                            Email notifications for updates
                        </label>
                    </div>
                </section>

                <!-- General Settings -->
                <section class="settings-section">
                    <h2><i class="fas fa-sliders-h"></i> General Settings</h2>
                    
                    <div class="setting-item">
                        <label for="theme">Theme</label>
                        <select id="theme" class="styled-select">
                            <option value="dark">Dark Theme</option>
                            <option value="light">Light Theme</option>
                            <option value="auto">Auto (System)</option>
                            <option value="high-contrast">High Contrast</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="language">Language</label>
                        <select id="language" class="styled-select">
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="de">German</option>
                            <option value="zh">Chinese</option>
                            <option value="ar">Arabic</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoStart">
                            <span class="checkmark"></span>
                            Auto-start accessibility features on page load
                        </label>
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="offlineMode">
                            <span class="checkmark"></span>
                            Enable offline mode (caches essential features)
                        </label>
                        <div class="setting-description">Work without internet connection</div>
                    </div>
                </section>

                <!-- Text-to-Speech Settings -->
                <section class="settings-section">
                    <h2><i class="fas fa-volume-up"></i> Text-to-Speech</h2>
                    
                    <div class="setting-item">
                        <label for="defaultVoice">Default Voice</label>
                        <select id="defaultVoice" class="styled-select">
                            <option value="">Loading voices...</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="defaultRate">Speech Rate: <span id="rateValue">1.0</span></label>
                        <input type="range" id="defaultRate" min="0.5" max="2" step="0.1" value="1">
                    </div>

                    <div class="setting-item">
                        <label for="defaultPitch">Speech Pitch: <span id="pitchValue">1.0</span></label>
                        <input type="range" id="defaultPitch" min="0.5" max="2" step="0.1" value="1">
                    </div>

                    <div class="setting-item">
                        <label for="defaultVolume">Volume: <span id="volumeValue">100%</span></label>
                        <input type="range" id="defaultVolume" min="0" max="100" step="1" value="100">
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoRead">
                            <span class="checkmark"></span>
                            Auto-read page content
                        </label>
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="highlightText">
                            <span class="checkmark"></span>
                            Highlight text as it's being read
                        </label>
                    </div>
                </section>

                <!-- Voice Control Settings -->
                <section class="settings-section">
                    <h2><i class="fas fa-microphone"></i> Voice Control</h2>
                    
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="voiceControlEnabled">
                            <span class="checkmark"></span>
                            Enable Voice Control
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label for="voiceLanguage">Voice Recognition Language</label>
                        <select id="voiceLanguage" class="styled-select">
                            <option value="en-US">English (US)</option>
                            <option value="en-GB">English (UK)</option>
                            <option value="es-ES">Spanish</option>
                            <option value="fr-FR">French</option>
                            <option value="de-DE">German</option>
                            <option value="it-IT">Italian</option>
                            <option value="ja-JP">Japanese</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="voiceFeedback">
                            <span class="checkmark"></span>
                            Enable voice feedback
                        </label>
                    </div>

                    <div class="voice-commands-preview">
                        <h4>Available Voice Commands</h4>
                        <div class="commands-grid">
                            <div class="command-category">
                                <h5>Navigation</h5>
                                <ul>
                                    <li>"go home", "home page"</li>
                                    <li>"about page", "about us"</li>
                                    <li>"text to speech", "tts"</li>
                                    <li>"object scanning", "scan"</li>
                                    <li>"color filters", "filters"</li>
                                    <li>"contact page", "contact us"</li>
                                    <li>"settings", "preferences"</li>
                                </ul>
                            </div>
                            <div class="command-category">
                                <h5>Content Control</h5>
                                <ul>
                                    <li>"read page", "read aloud"</li>
                                    <li>"stop reading", "pause"</li>
                                    <li>"next section", "previous"</li>
                                    <li>"scroll up/down"</li>
                                    <li>"zoom in/out"</li>
                                </ul>
                            </div>
                            <div class="command-category">
                                <h5>Accessibility</h5>
                                <ul>
                                    <li>"dark mode", "light mode"</li>
                                    <li>"high contrast", "normal"</li>
                                    <li>"increase text", "decrease text"</li>
                                    <li>"grayscale", "invert colors"</li>
                                    <li>"help", "what can I say"</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Color Filter Settings -->
                <section class="settings-section">
                    <h2><i class="fas fa-palette"></i> Color Filters</h2>
                    
                    <div class="setting-item">
                        <label for="defaultFilter">Default Color Filter</label>
                        <select id="defaultFilter" class="styled-select">
                            <option value="none">None</option>
                            <option value="grayscale">Grayscale</option>
                            <option value="high-contrast">High Contrast</option>
                            <option value="invert">Invert Colors</option>
                            <option value="sepia">Sepia</option>
                            <option value="blue-light">Blue Light Filter</option>
                            <option value="dark-mode">Dark Mode</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberFilter">
                            <span class="checkmark"></span>
                            Remember my filter preference
                        </label>
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoContrast">
                            <span class="checkmark"></span>
                            Auto-detect and apply optimal contrast
                        </label>
                    </div>
                </section>

                <!-- Performance Settings -->
                <section class="settings-section">
                    <h2><i class="fas fa-tachometer-alt"></i> Performance</h2>
                    
                    <div class="setting-item">
                        <label for="cacheSize">Cache Size: <span id="cacheSizeValue">50MB</span></label>
                        <input type="range" id="cacheSize" min="10" max="500" step="10" value="50">
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="lazyLoading">
                            <span class="checkmark"></span>
                            Enable lazy loading for images
                        </label>
                        <div class="setting-description">Improves page load speed</div>
                    </div>

                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="reduceAnimations">
                            <span class="checkmark"></span>
                            Reduce animations
                        </label>
                        <div class="setting-description">Better performance on low-end devices</div>
                    </div>

                    <div class="setting-item">
                        <button id="clearCache" class="btn btn-warning">
                            <i class="fas fa-broom"></i>
                            Clear Cache
                        </button>
                        <div class="setting-description warning">Clear all cached data</div>
                    </div>
                </section>

                <!-- Extension Sync Settings -->
                <section class="settings-section">
                    <h2><i class="fas fa-sync"></i> Extension Sync</h2>
                    
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="extensionSync">
                            <span class="checkmark"></span>
                            Sync with Chrome Extension
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="sync-status" id="syncStatus">
                            <i class="fas fa-plug"></i>
                            <span>Extension status: <span id="statusText">Checking...</span></span>
                        </div>
                    </div>

                    <div class="setting-item">
                        <button id="manualSync" class="btn btn-primary">
                            <i class="fas fa-sync-alt"></i>
                            Sync Now
                        </button>
                        <button id="exportSettings" class="btn btn-secondary">
                            <i class="fas fa-download"></i>
                            Export Settings
                        </button>
                        <button id="importSettings" class="btn btn-secondary">
                            <i class="fas fa-upload"></i>
                            Import Settings
                        </button>
                    </div>
                </section>

                <!-- Reset Section -->
                <section class="settings-section">
                    <h2><i class="fas fa-trash"></i> Reset & Data</h2>
                    
                    <div class="setting-item">
                        <button id="resetSettings" class="btn btn-danger">
                            <i class="fas fa-trash"></i>
                            Reset All Settings to Default
                        </button>
                        <div class="setting-description warning">This will reset all your settings to their default values</div>
                    </div>

                    <div class="setting-item">
                        <button id="exportData" class="btn btn-info">
                            <i class="fas fa-file-export"></i>
                            Export All Data
                        </button>
                        <div class="setting-description">Download your preferences and usage data</div>
                    </div>
                </section>
            </div>

            <!-- Action Buttons -->
            <footer class="settings-footer">
                <button id="saveSettings" class="btn btn-primary btn-large">
                    <i class="fas fa-save"></i>
                    Save All Changes
                </button>
                <button id="cancelChanges" class="btn btn-secondary">
                    Cancel
                </button>
                <span id="saveStatus" class="status-message"></span>
            </footer>
        </div>
    </main>


    <!-- Hidden file input for import -->
    <input type="file" id="importFileInput" accept=".json" style="display: none;">

</body>
<script>
// Immediate authentication check for settings page
document.addEventListener('DOMContentLoaded', function() {
    // Check if user is logged in and update profile display
    function updateUserProfile() {
        const userData = localStorage.getItem('user');
        if (userData) {
            try {
                const user = JSON.parse(userData);
                const profileName = document.getElementById('profileName');
                const profileEmail = document.getElementById('profileEmail');
                const displayNameInput = document.getElementById('displayName');
                const emailInput = document.getElementById('userEmail');
                
                if (profileName && user.name) {
                    profileName.textContent = user.name;
                }
                if (profileEmail && user.email) {
                    profileEmail.textContent = user.email;
                }
                if (displayNameInput && user.name) {
                    displayNameInput.value = user.name;
                }
                if (emailInput && user.email) {
                    emailInput.value = user.email;
                }
                
                // Update user icon in navigation
                const userIcon = document.querySelector('#logoutBtn i');
                if (userIcon) {
                    userIcon.style.color = '#10b981';
                    userIcon.parentNode.setAttribute('title', `Logged in as ${user.name}`);
                }
            } catch (e) {
                console.error('Error updating user profile:', e);
            }
        }
    }

    // Check immediately
    updateUserProfile();
    
    // Also check when auth manager is ready
    if (window.authManager) {
        setTimeout(updateUserProfile, 1000);
    }
    
    // Listen for storage changes (if user logs in/out in another tab)
    window.addEventListener('storage', function(e) {
        if (e.key === 'user') {
            updateUserProfile();
        }
    });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/preferences.js"></script>
    <script src="js/footer.js"></script>
</html>